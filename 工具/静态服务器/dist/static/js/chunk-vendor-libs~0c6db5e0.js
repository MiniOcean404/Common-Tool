"use strict";(self.webpackChunkgame_camp_2d=self.webpackChunkgame_camp_2d||[]).push([[570],{7069:function(e,t,r){r.d(t,{vl:function(){return C}});var n=r(2997),i=r(4306),a=r(8980),o=r(3588),s=r(8924),h=r(798),l=r(5501),u=r(536),f=r(5842),c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},c(e,t)};var d=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},p=function(){function e(){}return e.test=function(e){return"string"===typeof e&&0===e.indexOf("info face=")},e.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in t){var i=t[n].match(/^[a-z]+/gm)[0],a=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var s in a){var h=a[s].split("="),l=h[0],u=h[1].replace(/"/gm,""),f=parseFloat(u),c=isNaN(f)?u:f;o[l]=c}r[i].push(o)}var p=new d;return r.info.forEach((function(e){return p.info.push({face:e.face,size:parseInt(e.size,10)})})),r.common.forEach((function(e){return p.common.push({lineHeight:parseInt(e.lineHeight,10)})})),r.page.forEach((function(e){return p.page.push({id:parseInt(e.id,10),file:e.file})})),r.char.forEach((function(e){return p.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})})),r.kerning.forEach((function(e){return p.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})})),r.distanceField.forEach((function(e){return p.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})})),p},e}(),g=function(){function e(){}return e.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(e){for(var t=new d,r=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),o=e.getElementsByTagName("kerning"),s=e.getElementsByTagName("distanceField"),h=0;h<r.length;h++)t.info.push({face:r[h].getAttribute("face"),size:parseInt(r[h].getAttribute("size"),10)});for(h=0;h<n.length;h++)t.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(h=0;h<i.length;h++)t.page.push({id:parseInt(i[h].getAttribute("id"),10)||0,file:i[h].getAttribute("file")});for(h=0;h<a.length;h++){var l=a[h];t.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(h=0;h<o.length;h++)t.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});for(h=0;h<s.length;h++)t.distanceField.push({fieldType:s[h].getAttribute("fieldType"),distanceRange:parseInt(s[h].getAttribute("distanceRange"),10)});return t},e}(),v=function(){function e(){}return e.test=function(e){if("string"===typeof e&&e.indexOf("<font>")>-1){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return g.test(t)}return!1},e.parse=function(e){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return g.parse(t)},e}(),x=[p,g,v];function m(e){for(var t=0;t<x.length;t++)if(x[t].test(e))return x[t];return null}function y(e,t,r,n,i,a,s){var l=r.text,u=r.fontProperties;t.translate(n,i),t.scale(a,a);var f=s.strokeThickness/2,c=-s.strokeThickness/2;if(t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=function(e,t,r,n,i,a){var o,s=r.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,f=e.width/n-l-2*u,c=e.height/n-l-2*u,d=s.slice(),p=r.fillGradientStops.slice();if(!p.length)for(var g=d.length+1,v=1;v<g;++v)p.push(v/g);if(d.unshift(s[0]),p.unshift(0),d.push(s[s.length-1]),p.push(1),r.fillGradientType===h.M_.LINEAR_VERTICAL){o=t.createLinearGradient(f/2,u,f/2,c+u);var x=0,m=(a.fontProperties.fontSize+r.strokeThickness)/c;for(v=0;v<i.length;v++)for(var y=a.lineHeight*v,_=0;_<d.length;_++){var b=y/c+("number"===typeof p[_]?p[_]:_/d.length)*m,w=Math.max(x,b);w=Math.min(w,1),o.addColorStop(w,d[_]),x=w}}else{o=t.createLinearGradient(u,c/2,f+u,c/2);var T=d.length+1,A=1;for(v=0;v<d.length;v++){var S=void 0;S="number"===typeof p[v]?p[v]:A/T,o.addColorStop(S,d[v]),A++}}return o}(e,t,s,a,[l],r),t.strokeStyle=s.stroke,s.dropShadow){var d=s.dropShadowColor,p=(0,o.wK)("number"===typeof d?d:(0,o.qm)(d)),g=s.dropShadowBlur*a,v=s.dropShadowDistance*a;t.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+s.dropShadowAlpha+")",t.shadowBlur=g,t.shadowOffsetX=Math.cos(s.dropShadowAngle)*v,t.shadowOffsetY=Math.sin(s.dropShadowAngle)*v}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;s.stroke&&s.strokeThickness&&t.strokeText(l,f,c+r.lineHeight-u.descent),s.fill&&t.fillText(l,f,c+r.lineHeight-u.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function _(e){return Array.from?Array.from(e):e.split("")}function b(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var w=function(){function e(e,t,r){var i,a,h=e.info[0],u=e.common[0],f=e.page[0],c=e.distanceField[0],d=(0,o.fL)(f.file),p={};this._ownsTextures=r,this.font=h.face,this.size=h.size,this.lineHeight=u.lineHeight/d,this.chars={},this.pageTextures=p;for(var g=0;g<e.page.length;g++){var v=e.page[g],x=v.id,m=v.file;p[x]=t instanceof Array?t[g]:t[m],(null===c||void 0===c?void 0:c.fieldType)&&"none"!==c.fieldType&&(p[x].baseTexture.alphaMode=l.iw.NO_PREMULTIPLIED_ALPHA)}for(g=0;g<e.char.length;g++){var y=e.char[g],_=(x=y.id,y.page),b=e.char[g],w=b.x,T=b.y,A=b.width,S=b.height,C=b.xoffset,M=b.yoffset,P=b.xadvance;w/=d,T/=d,A/=d,S/=d,C/=d,M/=d,P/=d;var E=new n.Ae(w+p[_].frame.x/d,T+p[_].frame.y/d,A,S);this.chars[x]={xOffset:C,yOffset:M,xAdvance:P,kerning:{},texture:new s.xE(p[_].baseTexture,E),page:_}}for(g=0;g<e.kerning.length;g++){var I=e.kerning[g],O=I.first,k=I.second,F=I.amount;O/=d,k/=d,F/=d,this.chars[k]&&(this.chars[k].kerning[O]=F)}this.distanceFieldRange=null===c||void 0===c?void 0:c.distanceRange,this.distanceFieldType=null!==(a=null===(i=null===c||void 0===c?void 0:c.fieldType)||void 0===i?void 0:i.toLowerCase())&&void 0!==a?a:"none"}return e.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},e.install=function(t,r,n){var i;if(t instanceof d)i=t;else{var a=m(t);if(!a)throw new Error("Unrecognized data format for font.");i=a.parse(t)}r instanceof s.xE&&(r=[r]);var o=new e(i,r,n);return e.available[o.font]=o,o},e.uninstall=function(t){var r=e.available[t];if(!r)throw new Error("No font found named '"+t+"'");r.destroy(),delete e.available[t]},e.from=function(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,n),a=i.chars,o=i.padding,l=i.resolution,u=i.textureWidth,f=i.textureHeight,c=function(e){"string"===typeof e&&(e=[e]);for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var a=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,h=o;s<=h;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,_(i))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(a),p=r instanceof h.pn?r:new h.pn(r),g=u,v=new d;v.info[0]={face:p.fontFamily,size:p.fontSize},v.common[0]={lineHeight:p.fontSize};for(var x,m,w,T=0,A=0,S=0,C=[],M=0;M<c.length;M++){x||((x=document.createElement("canvas")).width=u,x.height=f,m=x.getContext("2d"),w=new s.VL(x,{resolution:l}),C.push(new s.xE(w)),v.page.push({id:C.length-1,file:""}));var P=h._A.measureText(c[M],p,!1,x),E=P.width,I=Math.ceil(P.height),O=Math.ceil(("italic"===p.fontStyle?2:1)*E);if(A>=f-I*l){if(0===A)throw new Error("[BitmapFont] textureHeight "+f+"px is too small for "+p.fontSize+"px fonts");--M,x=null,m=null,w=null,A=0,T=0,S=0}else if(S=Math.max(I+P.fontProperties.descent,S),O*l+T>=g)--M,A+=S*l,A=Math.ceil(A),T=0,S=0;else{y(x,m,P,T,A,l,p);var k=b(P.text);v.char.push({id:k,page:C.length-1,x:T/l,y:A/l,width:O,height:I,xoffset:0,yoffset:0,xadvance:Math.ceil(E-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0))}),T+=(O+2*o)*l,T=Math.ceil(T)}}M=0;for(var F=c.length;M<F;M++)for(var N=c[M],z=0;z<F;z++){var H=c[z],B=m.measureText(N).width,D=m.measureText(H).width,L=m.measureText(N+H).width-(B+D);L&&v.kerning.push({first:b(N),second:b(H),amount:L})}var j=new e(v,C,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=j,j},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),T=[],A=[],S=[],C=(function(e){function t(r,a){void 0===a&&(a={});var o=e.call(this)||this;o._tint=16777215;var s=Object.assign({},t.styleDefaults,a),h=s.align,l=s.tint,u=s.maxWidth,f=s.letterSpacing,c=s.fontName,d=s.fontSize;if(!w.available[c])throw new Error('Missing BitmapFont "'+c+'"');return o._activePagesMeshData=[],o._textWidth=0,o._textHeight=0,o._align=h,o._tint=l,o._fontName=c,o._fontSize=d||w.available[c].size,o.text=r,o._maxWidth=u,o._maxLineHeight=0,o._letterSpacing=f,o._anchor=new n.AB((function(){o.dirty=!0}),o,0,0),o._roundPixels=i.X.ROUND_PIXELS,o.dirty=!0,o._resolution=i.X.RESOLUTION,o._autoResolution=!0,o._textureCache={},o}(function(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(t,e),t.prototype.updateText=function(){for(var e,t=w.available[this._fontName],r=this._fontSize/t.size,i=new n.E9,h=[],u=[],f=[],c=_(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),d=this._maxWidth*t.size/this._fontSize,p="none"===t.distanceFieldType?T:A,g=null,v=0,x=0,m=0,y=-1,C=0,M=0,P=0,E=0,I=0;I<c.length;I++){var O=b(K=c[I]);if(/(?:\s)/.test(K)&&(y=I,C=v,E++),"\r"!==K&&"\n"!==K){var k=t.chars[O];if(k){g&&k.kerning[g]&&(i.x+=k.kerning[g]);var F=S.pop()||{texture:s.xE.EMPTY,line:0,charCode:0,prevSpaces:0,position:new n.E9};F.texture=k.texture,F.line=m,F.charCode=O,F.position.x=i.x+k.xOffset+this._letterSpacing/2,F.position.y=i.y+k.yOffset,F.prevSpaces=E,h.push(F),v=F.position.x+Math.max(k.xAdvance,k.texture.orig.width),i.x+=k.xAdvance+this._letterSpacing,P=Math.max(P,k.yOffset+k.texture.height),g=O,-1!==y&&d>0&&i.x>d&&(++M,(0,o.Er)(h,1+y-M,1+I-y),I=y,y=-1,u.push(C),f.push(h.length>0?h[h.length-1].prevSpaces:0),x=Math.max(x,C),m++,i.x=0,i.y+=t.lineHeight,g=null,E=0)}}else u.push(v),f.push(-1),x=Math.max(x,v),++m,++M,i.x=0,i.y+=t.lineHeight,g=null,E=0}var N=c[c.length-1];"\r"!==N&&"\n"!==N&&(/(?:\s)/.test(N)&&(v=C),u.push(v),x=Math.max(x,v),f.push(-1));var z=[];for(I=0;I<=m;I++){var H=0;"right"===this._align?H=x-u[I]:"center"===this._align?H=(x-u[I])/2:"justify"===this._align&&(H=f[I]<0?0:(x-u[I])/f[I]),z.push(H)}var B=h.length,D={},L=[],j=this._activePagesMeshData;for(I=0;I<j.length;I++)p.push(j[I]);for(I=0;I<B;I++){var R=(Q=h[I].texture).baseTexture.uid;if(!D[R]){if(!(oe=p.pop())){var W=new a.xc,U=void 0,X=void 0;"none"===t.distanceFieldType?(U=new a.rY(s.xE.EMPTY),X=l.T$.NORMAL):(U=new a.rY(s.xE.EMPTY,{program:s.$r.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),X=l.T$.NORMAL_NPM);var Y=new a.Kj(W,U);Y.blendMode=X,oe={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Y,vertices:null,uvs:null,indices:null}}oe.index=0,oe.indexCount=0,oe.vertexCount=0,oe.uvsCount=0,oe.total=0;var $=this._textureCache;$[R]=$[R]||new s.xE(Q.baseTexture),oe.mesh.texture=$[R],oe.mesh.tint=this._tint,L.push(oe),D[R]=oe}D[R].total++}for(I=0;I<j.length;I++)-1===L.indexOf(j[I])&&this.removeChild(j[I].mesh);for(I=0;I<L.length;I++)L[I].mesh.parent!==this&&this.addChild(L[I].mesh);for(var I in this._activePagesMeshData=L,D){var G=(oe=D[I]).total;if(!((null===(e=oe.indices)||void 0===e?void 0:e.length)>6*G)||oe.vertices.length<2*a.Kj.BATCHABLE_SIZE)oe.vertices=new Float32Array(8*G),oe.uvs=new Float32Array(8*G),oe.indices=new Uint16Array(6*G);else for(var V=oe.total,q=oe.vertices,Z=4*V*2;Z<q.length;Z++)q[Z]=0;oe.mesh.size=6*G}for(I=0;I<B;I++){var K,J=(K=h[I]).position.x+z[K.line]*("justify"===this._align?K.prevSpaces:1);this._roundPixels&&(J=Math.round(J));var Q,ee=J*r,te=K.position.y*r,re=D[(Q=K.texture).baseTexture.uid],ne=Q.frame,ie=Q._uvs,ae=re.index++;re.indices[6*ae+0]=0+4*ae,re.indices[6*ae+1]=1+4*ae,re.indices[6*ae+2]=2+4*ae,re.indices[6*ae+3]=0+4*ae,re.indices[6*ae+4]=2+4*ae,re.indices[6*ae+5]=3+4*ae,re.vertices[8*ae+0]=ee,re.vertices[8*ae+1]=te,re.vertices[8*ae+2]=ee+ne.width*r,re.vertices[8*ae+3]=te,re.vertices[8*ae+4]=ee+ne.width*r,re.vertices[8*ae+5]=te+ne.height*r,re.vertices[8*ae+6]=ee,re.vertices[8*ae+7]=te+ne.height*r,re.uvs[8*ae+0]=ie.x0,re.uvs[8*ae+1]=ie.y0,re.uvs[8*ae+2]=ie.x1,re.uvs[8*ae+3]=ie.y1,re.uvs[8*ae+4]=ie.x2,re.uvs[8*ae+5]=ie.y2,re.uvs[8*ae+6]=ie.x3,re.uvs[8*ae+7]=ie.y3}for(var I in this._textWidth=x*r,this._textHeight=(i.y+t.lineHeight)*r,D){var oe=D[I];if(0!==this.anchor.x||0!==this.anchor.y)for(var se=0,he=this._textWidth*this.anchor.x,le=this._textHeight*this.anchor.y,ue=0;ue<oe.total;ue++)oe.vertices[se++]-=he,oe.vertices[se++]-=le,oe.vertices[se++]-=he,oe.vertices[se++]-=le,oe.vertices[se++]-=he,oe.vertices[se++]-=le,oe.vertices[se++]-=he,oe.vertices[se++]-=le;this._maxLineHeight=P*r;var fe=oe.mesh.geometry.getBuffer("aVertexPosition"),ce=oe.mesh.geometry.getBuffer("aTextureCoord"),de=oe.mesh.geometry.getIndex();fe.data=oe.vertices,ce.data=oe.uvs,de.data=oe.indices,fe.update(),ce.update(),de.update()}for(I=0;I<h.length;I++)S.push(h[I])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var r=w.available[this._fontName],n=r.distanceFieldRange,i=r.distanceFieldType,a=r.size;if("none"!==i)for(var o=this.worldTransform,s=o.a,h=o.b,l=o.c,u=o.d,f=Math.sqrt(s*s+h*h),c=Math.sqrt(l*l+u*u),d=(Math.abs(f)+Math.abs(c))/2,p=this._fontSize/a,g=0,v=this._activePagesMeshData;g<v.length;g++){v[g].mesh.shader.uniforms.uFWidth=d*n*p*this._resolution}e.prototype._render.call(this,t)},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!w.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){"number"===typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null===e||void 0===e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(t){var r=this._textureCache;for(var n in r){r[n].destroy(),delete r[n]}this._textureCache=null,e.prototype.destroy.call(this,t)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(u.W2),function(){function e(){}return e.add=function(){f.kC.setExtensionXhrType("fnt",f.kC.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){var n=m(t.data);if(n)for(var i=e.getBaseUrl(this,t),a=n.parse(t.data),o={},s=function(e){o[e.metadata.pageFile]=e.texture,Object.keys(o).length===a.page.length&&(t.bitmapFont=w.install(a,o,!0),r())},h=0;h<a.page.length;++h){var l=a.page[h].file,u=i+l,c=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===u){p.metadata.pageFile=l,p.texture?s(p):p.onAfterMiddleware.add(s),c=!0;break}}if(!c){var g={crossOrigin:t.crossOrigin,loadType:f.kC.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},t.metadata.imageMetadata),parentResource:t};this.add(u,g,s)}}else r()},e.getBaseUrl=function(t,r){var n=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&("."===n&&(n=""),t.baseUrl&&n&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(n+="/")),(n=n.replace(t.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/"),n},e.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},e}())}}]);